<div class="container mx-auto px-4 py-6">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-bold text-gray-800">Liste des Clients</h2>
    <button (click)="openCreateModal()" 
            class="bg-blue-600 text-white px-4 py-2 rounded-md text-base hover:bg-blue-700 transition-colors flex items-center">
      <i class="fas fa-plus mr-2 text-sm"></i>Nouveau Client
    </button>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="showDeleteModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg w-full max-w-md">
      <div class="p-5">
        <div class="flex items-center mb-3">
          <i class="fas fa-exclamation-triangle text-red-500 text-xl mr-2"></i>
          <h3 class="text-base font-semibold text-gray-900">Confirmer la suppression</h3>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          Supprimer <strong>{{ clientToDelete?.name }}</strong> ? Cette action est irréversible.
        </p>
        <div class="flex justify-end gap-3">
          <button (click)="cancelDelete()" 
                  class="px-4 py-2 border text-sm border-gray-300 rounded-md bg-white hover:bg-gray-50"
                  [disabled]="isDeleting">
            Annuler
          </button>
          <button (click)="confirmDelete()" 
                  class="px-4 py-2 text-sm rounded-md text-white bg-red-600 hover:bg-red-700"
                  [disabled]="isDeleting">
            <span *ngIf="!isDeleting">Supprimer</span>
            <span *ngIf="isDeleting" class="flex items-center">
              <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0..."></path>
              </svg>
              Suppression...
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Search -->
  <div class="mb-6">
    <div class="relative">
      <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
        <i class="fas fa-search text-gray-400 text-sm"></i>
      </div>
      <input type="text" [(ngModel)]="searchTerm" (input)="onSearch()"
             class="block w-full pl-10 pr-4 py-2.5 rounded-md border border-gray-300 text-sm placeholder-gray-400 
                    focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
             placeholder="Rechercher par nom ou téléphone...">
      <button *ngIf="searchTerm" (click)="clearSearch()" 
              class="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-red-500">
        <i class="fas fa-times text-sm"></i>
      </button>
    </div>
  </div>

  <!-- Clients Table -->
  <div *ngIf="!isLoading && !error && filteredClients.length > 0" class="w-full overflow-x-auto bg-white rounded-lg shadow">
    <table class="w-full border-collapse text-sm">
      <thead>
        <tr>
          <th class="px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700 uppercase tracking-wide border-b text-xs">Nom</th>
          <th class="px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700 uppercase tracking-wide border-b text-xs">Téléphone</th>
          <th class="px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700 uppercase tracking-wide border-b text-xs">Email</th>
          <th class="px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700 uppercase tracking-wide border-b text-xs">Adresse</th>
          <th class="px-4 py-3 text-center bg-gray-50 font-semibold text-gray-700 uppercase tracking-wide border-b text-xs">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let client of filteredClients" class="hover:bg-gray-50 transition">
          <td class="px-4 py-3 border-b">{{ client.name }}</td>
          <td class="px-4 py-3 border-b">{{ client.phone || 'N/A' }}</td>
          <td class="px-4 py-3 border-b">{{ client.email || 'N/A' }}</td>
          <td class="px-4 py-3 border-b">{{ client.address || 'N/A' }}</td>
          <td class="px-4 py-3 border-b text-center">
            <div class="flex items-center justify-center gap-2">
              <button (click)="openUpdateModal(client)" 
                      class="w-7 h-7 flex items-center justify-center bg-green-500 text-white rounded hover:bg-green-600">
                <i class="fas fa-edit text-sm"></i>
              </button>
              <button (click)="openDeleteModal(client)" 
                      class="w-7 h-7 flex items-center justify-center bg-red-500 text-white rounded hover:bg-red-600">
                <i class="fas fa-trash text-sm"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Count -->
  <div *ngIf="!isLoading && !error && filteredClients.length > 0" class="text-center text-sm text-gray-600 mt-4">
    {{ filteredClients.length }} client(s) trouvé(s)
    <span *ngIf="searchTerm"> pour "{{ searchTerm }}"</span>
  </div>
</div>
